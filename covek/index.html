<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>c√∂vek ‚Äì EOV koordin√°ta transzformtor</title>
    
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet Providers plugin -->
    <script src="https://unpkg.com/leaflet-providers@2.0.0/leaflet-providers.js"></script>
    
    <!-- Proj4.js - unpkg CDN-b≈ël -->
    <script src="https://unpkg.com/proj4@2.9.1/dist/proj4.js"></script>
    
    <!-- JSZip √©s shpjs (shapefile) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://unpkg.com/shpjs@3.4.3/dist/shp.js"></script>
    
    <!-- Local styles -->
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="container">
        <div id="map">
            <!-- Koordin√°ta panel a t√©rk√©pen -->
            <div class="coord-panel">
                <div class="coord-row">
                    <div class="coord-label">WGS84</div>
                    <div class="coord-value">
                        <span id="lat">‚Äî</span>, <span id="lon">‚Äî</span>
                    </div>
                </div>
                <div class="coord-row">
                    <div class="coord-label">ETRF2000</div>
                    <div class="coord-value">
                        <span id="latETRF">‚Äî</span>, <span id="lonETRF">‚Äî</span>
                    </div>
                </div>
                <div class="coord-row">
                    <div class="coord-label">EOV</div>
                    <div class="coord-value">
                        Y: <span id="eovY">‚Äî</span> X: <span id="eovX">‚Äî</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- M√©r√©si t√°vols√°g panel az alj√°n -->
        <div id="distance-info-panel" class="distance-info-panel" style="display: none;">
            <div id="distance-text">‚Äî</div>
        </div>

        <!-- Poligon inform√°ci√≥s panel az alj√°n -->
        <div id="polygon-info-panel" class="polygon-info-panel" style="display: none;">
            <div class="polygon-info-header">
                <strong>üìç Poligon</strong>
                <span id="polygon-area" style="float: right; font-weight: bold; color: #ff6b35;">‚Äî</span>
            </div>
            <div id="polygon-properties" class="polygon-properties">
                <!-- Properties dinamikusan jelennek meg -->
            </div>
        </div>
        
        <button class="hamburger" id="hamburgerBtn" aria-label="Men√º">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <div class="sidebar" id="sidebar">
            <button class="sidebar-close" id="sidebarClose" aria-label="Bez√°r√°s">‚úï</button>
            <h2>üó∫Ô∏è c√∂vek</h2>
            <p style="margin: -15px 0 20px 0; font-size: 12px; color: #999; font-style: italic;">‚Äì √°ll mint a c√∂vek</p>
            
            <!-- Shapefile upload -->
            <div class="section">
                <h3>üìÅ Shapefile import</h3>
                <label for="shapeFile">ZIP f√°jl (shapefile)</label>
                <input type="file" id="shapeFile" accept=".zip" />
                
                <label for="shapeFileProjection" style="display: flex; align-items: center; gap: 8px;">
                    Vet√ºlet
                    <button id="projectionHelpBtn" type="button" class="help-icon-btn" title="Vet√ºlet inform√°ci√≥" aria-label="Vet√ºlet inform√°ci√≥">
                        ?
                    </button>
                </label>
                <select id="shapeFileProjection">
                    <option value="wgs84">WGS84</option>
                    <option value="etrf2000">ETRF2000</option>
                    <option value="eov" selected>EOV</option>
                </select>
                
                <div id="shapeFileStatus"></div>
            </div>

            <!-- Forr√°s kiv√°laszt√°sa -->
            <div class="section">
                <h3>üì° Forr√°s</h3>
                <label for="gpsSource" style="display: flex; align-items: center; gap: 8px;">
                    Kiv√°lasztott forr√°s
                    <button id="sourceHelpBtn" type="button" class="help-icon-btn" title="Forr√°s inform√°ci√≥" aria-label="Forr√°s inform√°ci√≥">
                        ?
                    </button>
                </label>
                <select id="gpsSource">
                    <option value="wgs84">WGS84 GPS</option>
                    <option value="rtk">ETRF2000 RTK</option>
                    <option value="screenCenter">T√©rk√©p k√∂z√©ppontja</option>
                </select>
            </div>

            <!-- Auto zoom -->
            <div class="section">
                <h3>üîç Megjelen√≠t√©s</h3>
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="autoZoomEnable" style="margin-right: 8px;">
                    <span>Auto zoom m≈±holdn√©zethez</span>
                </label>
            </div>

            <!-- About -->
            <div class="section about-section">
                <h3>‚ÑπÔ∏è N√©vjegy</h3>
                <p>
                    <strong>C√∂vek</strong><br>
                    EOV koordin√°ta transzform√°ci√≥s √©s shapefile feldolgoz√≥ alkalmaz√°s
                </p>
                <p>
                    <strong>K√©sz√≠tette:</strong> Mr. Poke<br>
                    üìß <a href="mailto:mrpoke21@gmail.com">mrpoke21@gmail.com</a>
                </p>
                <p style="font-size: 12px; color: #999; margin-top: 12px;">
                    <strong>T√°mogatta:</strong> GitHub Copilot AI Assistant<br>
                    Az alkalmaz√°s fejleszt√©s√©ben mesters√©ges intelligencia seg√©dlettel k√©sz√ºlt k√≥doptimaliz√°l√°s, refaktor√°l√°s √©s felhaszn√°l√≥i interf√©sz fejleszt√©s ter√©n.
                </p>
            </div>
        </div>
    </div>

    <!-- Vet√ºlet inform√°ci√≥s modal -->
    <div id="projectionModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ÑπÔ∏è Vet√ºlet inform√°ci√≥</h2>
                <button class="modal-close" id="projectionModalClose" type="button" aria-label="Bez√°r√°s">‚úï</button>
            </div>
            <div class="modal-body">
                <p><strong>Mit kell ezzel csin√°lni?</strong></p>
                <p>A felt√∂lteni k√≠v√°nt <strong>shapefile-ban t√°rolt koordin√°t√°k vet√ºlet√©t kell megadni</strong>. Ez a f√°jl metaadataiban vagy dokument√°ci√≥j√°ban szerepel.</p>
                
                <p><strong>üó∫Ô∏è Vet√ºlet t√≠pusok:</strong></p>
                <ul>
                    <li><strong>EOV</strong> ‚Äì Magyarorsz√°g Egys√©ges Vet√ºleti Rendszere (1975). Ez a <strong>leggyakoribb</strong> v√°laszt√°s magyar shapefile-ok eset√©n.</li>
                    <li><strong>ETRF2000</strong> ‚Äì Eur√≥pai referencia rendszer. K√∂zvetlen√ºl haszn√°lhat√≥ EOV sz√ºl≈ërendszerk√©nt.</li>
                    <li><strong>WGS84</strong> ‚Äì GPS standart. <strong>Nagyon ritk√°n</strong> fordul el≈ë magyar adatok eset√©n.</li>
                </ul>
                
                <p><strong>‚ö†Ô∏è Hib√°s vet√ºlet v√°laszt√°sa eset√©n:</strong></p>
                <p>Sikertelen koordin√°ta-transzform√°ci√≥ vagy lehets√©ges Java hiba g√°tolhatja a felt√∂lt√©st. Ha ez megt√∂rt√©nik:</p>
                <ol>
                    <li>A ZIP-f√°jlb√≥l <strong>t√∂r√∂ld ki a .prj f√°jlt</strong> (az EOV vet√ºleti defin√≠ci√≥j√°t tartalmazza, mely √ºtk√∂zhet egy m√°sik vet√ºlettel)</li>
                    <li>Pr√≥b√°ld meg √∫jra felt√∂lteni a m√≥dos√≠tott ZIP f√°jlt</li>
                </ol>
                
                <p><strong>üí° Tipp:</strong> Ha nem vagy biztos, a .prj f√°jlt sz√∂vegeditorban megnyitva megtekintheted az aktu√°lis vet√ºleti defin√≠ci√≥t.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="projectionModalOK" type="button">Rendben</button>
            </div>
        </div>
    </div>

    <!-- Forr√°s inform√°ci√≥s modal -->
    <div id="sourceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ÑπÔ∏è Forr√°s inform√°ci√≥</h2>
                <button class="modal-close" id="sourceModalClose" type="button" aria-label="Bez√°r√°s">‚úï</button>
            </div>
            <div class="modal-body">
                <p><strong>Mit kell ezzel csin√°lni?</strong></p>
                <p>V√°laszd ki a koordin√°ta adatok <strong>forr√°srendszer√©t</strong> ‚Äì ahonnan az aktu√°lis poz√≠ci√≥dat szeretn√©d meghat√°rozni.</p>
                
                <p><strong>üì° Forr√°s t√≠pusok:</strong></p>
                <ul>
                    <li><strong>ETRF2000 RTK</strong> ‚Äì Val√≥s idej≈± kinematikus GNSS, fix megold√°s. <strong>RTK fix eset√©n ezt kell v√°lasztani.</strong> Centim√©teres pontoss√°g Magyarorsz√°g felett.</li>
                    <li><strong>WGS84 GPS</strong> ‚Äì Standard vagy h√°l√≥zati korrekci√≥s DGNSS, PPP stb. <strong>Ha m√°s korrekci√≥s m√≥dszert haszn√°lsz (D*GNSS, PPP, stb.), ezt v√°laszd.</strong> Decim√©teres pontoss√°g.</li>
                    <li><strong>T√©rk√©p k√∂z√©ppontja</strong> ‚Äì A t√©rk√©pen megjelen√≠tett ter√ºlet k√∂z√©ppontja. <strong>Tesztel√©sre √©s tanul√°sra</strong> haszn√°lhat√≥, ha nincs val√≥s GPS adatod.</li>
                </ul>
                
                <p><strong>üí° Tipp:</strong> Ha RTK vev≈ëvel dolgozol, az ETRF2000 RTK az aj√°nlott. Egy√©b esetekben a WGS84 GPS lehet≈ës√©g felel meg a legt√∂bb felhaszn√°l√°si esetnek.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="sourceModalOK" type="button">Rendben</button>
            </div>
        </div>
    </div>

    <script src="logger.js"></script>
    <script src="validation.js"></script>
    <script src="eov-transformer.js"></script>
    <script src="mathematics.js"></script>
    <script src="ui-controls.js"></script>
    <script src="script.js"></script>
</body>
</html>
